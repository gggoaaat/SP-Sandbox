
{{#switch formType}} 
    {{#case "create"}} {{setVar "formType" "create"}} {{/case}} 
    {{#case "view"}} {{setVar "formType" "view"}} {{setVar "hasID" true}} {{/case}} 
    {{#case "edit"}} {{setVar "formType" "edit"}} {{setVar "hasID" true}} {{/case}} 
    {{#default}} {{setVar "formType" "create"}} {{/default}} 
{{/switch}}

<div class="form row form-container" 
    id="form-{{formType}}-{{name}}" 
    data-source="{{name}}" 
    data-formtype="{{formType}}" 
    data-basetemplate="{{baseTemplate}}" 
    style="margin-right: 0;"
>
    {{#if hasID}}
        <input type="hidden" name="{{@root.name}}.ID" data-name="ID" data-entity="ID" data-owner="{{@root.name}}" /> 
    {{/if}} 
    {{#d.results}} 
        {{#if spLoadObject}} 
        {{#if hidden}}
            {{#switch TypeAsString}} 
                {{#case "Lookup"}}
                    <input type="hidden" id="{{uiID}}"  
                        name="{{@root.name}}.{{Title}}"  
                        data-entity="{{EntityPropertyName}}Id"  
                        data-name="{{Title}}Id" 
                        data-owner="{{@root.name}}" 
                        data-spType="{{TypeAsString}}" value="{{currentParentID}}" 
                    /> 
                {{/case}} 
                {{#case "Attachments"}}
                    {{! Do not display Attachments as hidden}}
                {{/case}}
                {{#default}}
                    <input type="hidden" id="{{uiID}}" 
                        name="{{@root.name}}.{{Title}}"  
                        data-entity="{{EntityPropertyName}}" 
                        data-name="{{Title}}"
                        data-owner="{{@root.name}}"
                        data-spType="{{TypeAsString}}" value="{{currentParentID}}" 
                    /> 
                {{/default}} 
            {{/switch}}                
        {{else}}
            <div class="form-group 
                {{#switch TypeAsString}}
                    {{#case "Attachments" "File" }}
                        col-md-12
                    {{/case}}
                    {{#default}} 
                        {{#if hasBootstrapGridOverride}} {{bootstrapGridOverride}} {{else}} col-md-4 col-sm-12 col-lg-3 {{/if}}
                    {{/default}}
                {{/switch}}">
                
                {{#switch TypeAsString}} 
                    {{#case "Text" "Choice" "MultiChoice" "Lookup" "Note" "UserMulti" "Attachments" "File" "User" "DateTime" "Number" "Currency"}}     
                         {{#switch Title}} 
                            {{#case "Name" "Title" "zSequence" "zActive"}}   
                            {{/case}}
                            {{#default}} 
                                <label for="{{Title}}" style="width: 100%; 
                                    {{#ifCondition Title '== "Title"'}}
                                    {{#ifCondition formType '== "create"'}}
                                        Display:none;
                                    {{/ifCondition}}
                                    {{/ifCondition}}"
                                >
                                {{{replace Title '_' ' '}}}
                                {{#if Required}}
                                <span class="red-text">*</span>
                                {{/if}}
                                </label> 
                            {{/default}}
                        {{/switch}}                                   
                    {{/case}} 
                {{/switch}} 
                
                {{#switch TypeAsString}} 
                    {{#case "Text"}}                        
                        {{#switch Title}}
                            {{#case "zSequence" "zActive"}}
                                {{#ifCondition Title '== "zSequence"'}}
                                    {{#if @root.repeatable.hasSequence }}
                                        <input type="hidden" id="{{uiID}}" 
                                            name="{{@root.name}}.{{Title}}"  
                                            data-entity="{{EntityPropertyName}}" 
                                            data-name="{{Title}}"
                                            data-owner="{{@root.name}}"
                                            data-spType="{{TypeAsString}}" value="{{currentParentID}}" 
                                        />
                                    {{/if}}
                                {{/ifCondition}}

                                {{#ifCondition Title '== "zActive"'}}
                                    {{#if @root.repeatable.hasActive}}
                                        <input type="hidden" id="{{uiID}}" 
                                            name="{{@root.name}}.{{Title}}"  
                                            data-entity="{{EntityPropertyName}}" 
                                            data-name="{{Title}}"
                                            data-owner="{{@root.name}}"
                                            data-spType="{{TypeAsString}}" value="{{currentParentID}}" 
                                        /> 
                                    {{/if}} 
                                {{/ifCondition}}
                            {{/case}}
                            {{#default}}
                                <input type="text" id="{{uiID}}" class="form-control" 
                                    {{#ifCondition Title '== "Title"'}}{{#ifCondition formType '== "create"'}}style="Display:none;" {{/ifCondition}}{{/ifCondition}}
                                    name="{{@root.name}}.{{Title}}" 
                                    data-entity="{{EntityPropertyName}}"
                                    data-name="{{Title}}"
                                    data-readOnly = "{{readOnly}}" 
                                    aria-describedby="{{Title}}Help" 
                                    placeholder="Enter {{{replace Title '_' ' '}}}" 
                                    data-defaultvalue="{{DefaultValue}}" 
                                    value="{{DefaultValue}}" 
                                    {{#if Required}}required{{/if}}
                                /> 
                            {{/default}}
                        {{/switch}}                                               
                    {{/case}} 
                    {{#case "Number"}}
                        <input type="text" id="{{uiID}}" 
                            class="form-control sp-Number" 
                            name="{{@root.name}}.{{Title}}" 
                            data-entity="{{EntityPropertyName}}" 
                            data-name="{{Title}}"
                            data-readOnly = "{{readOnly}}" 
                            aria-describedby="{{Title}}Help" 
                            placeholder="Enter {{{replace Title '_' ' '}}}" 
                            data-defaultvalue="{{DefaultValue}}"
                            value="{{DefaultValue}}" 
                            {{#if Required}}required{{/if}}
                        /> 
                    {{/case}} 
                    {{#case "Currency" }} 
                        <input type="text" id="{{uiID}}" 
                            class="form-control sp-Currency" 
                            name="{{@root.name}}.{{Title}}" 
                            data-entity="{{EntityPropertyName}}" 
                            data-name="{{Title}}"
                            data-readOnly = "{{readOnly}}" 
                            aria-describedby="{{Title}}Help" 
                            placeholder="Enter {{{replace Title '_' ' '}}}" 
                            data-defaultvalue="{{DefaultValue}}"
                            value="{{DefaultValue}}" 
                            {{#if Required}}required{{/if}}
                        /> 
                    {{/case}} 
                    {{#case "MultiChoice"}} 
                        <select multiple type="text" id="{{uiID}}" 
                            class="form-control select2-js" 
                            name="{{@root.name}}.{{Title}}" 
                            data-entity="{{EntityPropertyName}}" 
                            data-name="{{Title}}"
                            data-readOnly = "{{readOnly}}" 
                            aria-describedby="{{Title}}Help" 
                            placeholder="Enter {{Title}}" 
                            data-defaultvalue="{{DefaultValue}}"
                            {{#if Required}}required{{/if}}
                        >
                            {{!<option value="">Please Select {{replace Title '/_/' ' '}}</option>}}
                            {{#Choices.results}}
                                <option value="{{this}}">{{this}}</option>
                            {{/Choices.results}}
                        </select>
                    {{/case}} 
                    {{#case "Boolean"}}
                        <input type="checkbox" id="{{uiID}}" 
                            class="" 
                            name="{{@root.name}}.{{Title}}" 
                            data-entity="{{EntityPropertyName}}" 
                            data-name="{{Title}}"
                            data-readOnly = "{{readOnly}}" 
                            {{#if Required}}required{{/if}}
                        />
                        <label class="" for="{{uiID}}">Check this custom checkbox</label>
                        <div class="invalid-feedback"></div>
                    {{/case}} 
                    {{#case "Choice"}} 
                        {{#switch EditFormat}} 
                            {{#case 0}}
                                <select type="text" id="{{uiID}}" 
                                    class="form-control select2-js" 
                                    name="{{@root.name}}.{{Title}}" 
                                    data-entity="{{EntityPropertyName}}" 
                                    data-name="{{Title}}"
                                    data-readOnly = "{{readOnly}}" 
                                    aria-describedby="{{Title}}Help" 
                                    placeholder="Enter {{Title}}" 
                                    data-defaultvalue="{{DefaultValue}}"
                                    {{#if Required}}required{{/if}}
                                >
                                    <option value="">Please Select {{replace Title '/_/' ' '}}</option>
                                    {{#Choices.results}}
                                        <option value="{{this}}">{{this}}</option>
                                    {{/Choices.results}}
                                </select> 
                                {{#if FillInChoice}} 
                                    {{#switch @root.formType}} 
                                        {{#case "create" "edit"}}
                                            <a href="javascript:void(0);" for="{{uiID}}" 
                                                class="sp-fill-in" 
                                                data-choicetype="dropdown" 
                                                data-toggle="popover" 
                                                name="{{@root.name}}.{{Title}}" 
                                                data-entity="{{EntityPropertyName}}" 
                                                data-source="{{@root.name}}" 
                                                data-owner="{{Title}}"
                                                data-readOnly = "{{readOnly}}" 
                                                data-editformat="{{EditFormat}}"
                                                data-readOnly = "{{readOnly}}"
                                                data-trigger="hover" 
                                                data-placement="top"                                                    
                                                title="Add New Value" 
                                                data-content="Your desired value is not in the list? Click the plus and add it."
                                            >
                                                <i class="fa fa-plus-circle"></i>
                                            </a> 
                                        {{/case}} 
                                    {{/switch}} 
                                {{/if}} 
                            {{/case}} 
                            {{#case 1}}
                                {{! <div class="form-check form-check-inline"> }}
                                <div id="{{uiID}}" class="sp-radio-wrapper" 
                                    data-uuid="{{uiID}}" 
                                    data-source="{{@root.name}}" 
                                    data-entity="{{EntityPropertyName}}" 
                                    data-for="{{Title}}" 
                                    data-action="{{@root.formType}}"
                                >
                                    {{#Choices.results}}
                                        <div class="form-check">
                                            <input class="form-check-input" for="{{../uiID}}" type="radio" name="{{@root.name}}.{{../Title}}" data-entity="{{../EntityPropertyName}}" id="{{@root.formType}}.{{@root.name}}.{{../Title}}{{@index}}" data-name="{{../Title}}" value="{{this}}">
                                            <label class="form-check-label" for="">{{this}}</label>
                                        </div>
                                    {{/Choices.results}}
                                </div>
                                {{#if FillInChoice}} 
                                    {{#switch @root.formType}} 
                                        {{#case "create" "edit"}}
                                            <div class="">
                                                <a href="javascript:void(0);" for="{{uiID}}" 
                                                    class="sp-fill-in" 
                                                    data-choicetype="radio" 
                                                    style="position: relative; padding: 0px;" 
                                                    data-toggle="popover" 
                                                    name="{{@root.name}}.{{Title}}" 
                                                    data-entity="{{EntityPropertyName}}" 
                                                    data-source="{{@root.name}}" 
                                                    data-owner="{{Title}}"
                                                    data-readOnly = "{{readOnly}}"
                                                    data-editformat="{{EditFormat}}" 
                                                    data-trigger="hover" 
                                                    data-placement="top" 
                                                    title="Add New Value" 
                                                    data-content="Your desired value is not in the list? Click the plus and add it."
                                                >
                                                    <i class="fa fa-plus-circle"></i> Add new value
                                                </a>
                                            </div>
                                        {{/case}}
                                    {{/switch}}
                                {{/if}}
                            {{/case}}
                            {{#case 2}}
                                <select multiple type="text" id="{{uiID}}" 
                                    class="form-control select2-js" 
                                    name="{{@root.name}}.{{../Title}}"
                                    data-readOnly = "{{readOnly}}" 
                                    data-entity="{{EntityPropertyName}}" 
                                    data-name="{{Title}}" 
                                    aria-describedby="{{../Title}}Help" 
                                    placeholder="Enter {{Title}}" 
                                    data-defaultvalue="{{DefaultValue}}" 
                                    {{#if Required}}required{{/if}}
                                >
                                    <option value="">Please Select {{replace Title '/_/' ' '}}</option>
                                    {{#Choices.results}}
                                        <option value="{{this}}">{{this}}</option>
                                    {{/Choices.results}}
                                </select>
                                {{#if FillInChoice}}
                                    {{#switch @root.formType}}
                                        {{#case "create" "edit"}}
                                            <a href="javascript:void(0);" class="sp-fill-in" 
                                                data-choicetype="dropdown" 
                                                data-toggle="popover" 
                                                name="{{@root.name}}.{{Title}}"
                                                data-readOnly = "{{readOnly}}" 
                                                data-entity="{{EntityPropertyName}}" 
                                                data-source="{{@root.name}}" 
                                                data-owner="{{Title}}" 
                                                data-editformat="{{EditFormat}}"
                                                data-trigger="hover" 
                                                data-placement="top" 
                                                title="Add New Value" 
                                                data-content="Your desired value is not in the list? Click the plus and add it."
                                            >
                                                <i class="fa fa-plus-circle"></i>
                                            </a> 
                                        {{/case}}
                                    {{/switch}}
                                {{/if}}
                            {{/case}}
                        {{/switch}}
                    {{/case}}
                    {{#case "Lookup"}}
                        <select type="text" id="{{uiID}}" class="form-control sp-lookup" 
                            name="{{@root.name}}.{{Title}}" 
                            data-entity="{{EntityPropertyName}}Id" 
                            data-owner="{{@root.name}}" 
                            data-name="{{Title}}Id"
                            data-readOnly = "{{readOnly}}" 
                            data-selectname="{{EntityPropertyName}}" 
                            aria-describedby="{{Title}}Help"
                            placeholder="Enter {{Title}}" 
                            data-defaultvalue="{{DefaultValue}}" 
                            {{#if Required}} required {{/if}} 
                            {{#if hasDropDownRelationship}}
                                data-child="{{dropDownRelationship.child}}" 
                                data-lookupfield="{{dropDownRelationship.lookupField}}" 
                            {{/if}}
                        >
                            <option value="">Please Select {{replace Title '/_/' ' '}}</option>
                            {{#LookupData.results}}
                                <option value="{{Id}}">{{lookupText}}</option>
                            {{/LookupData.results}}
                        </select>
                    {{/case}}
                    {{#case "User" "UserMulti"}}
                        <input type="hidden" id="{{uiID}}" 
                            name="{{@root.formType}}.{{@root.name}}.{{Title}}" 
                            data-name="{{Title}}"
                            data-readOnly = "{{readOnly}}" 
                            data-owner="{{@root.name}}" 
                            data-entity="{{EntityPropertyName}}" 
                            data-multi="{{AllowMultipleValues}}" 
                            class="people-picker-data"
                        >
                        <div id="{{randomUUID}}" type="sp-people" data-name="{{@root.formType}}.{{@root.name}}.{{Title}}" class="people-picker" data-owner="{{@root.name}}" data-multi="{{AllowMultipleValues}}" data-type="{{#ifCondition SelectionMode '== 0'}}User{{else}}Group{{/ifCondition}}"
                            data-selectiongroup="{{SelectionGroup}}"></div>
                        <div class="picker-meta-data" data-name="{{@root.formType}}.{{@root.name}}.{{Title}}"></div>
                    {{/case}}
                    {{#case "Note"}}
                        <textarea id="{{uiID}}" type="text" class="form-control spa-textarea" 
                            name="{{@root.name}}.{{Title}}" 
                            data-entity="{{EntityPropertyName}}" 
                            data-name="{{Title}}"
                            data-readOnly = "{{readOnly}}" 
                            aria-describedby="{{Title}}Help" 
                            placeholder="Enter {{{replace Title '_' ' '}}}" 
                            value="{{DefaultValue}}" 
                            {{#if Required}}required{{/if}}
                        /> 
                    {{/case}}
                    {{#case "DateTime"}}
                        <input type="text" id="{{uiID}}" class="form-control sp-calendar" 
                            name="{{@root.name}}.{{Title}}" 
                            data-entity="{{EntityPropertyName}}" 
                            data-name="{{Title}}"
                            data-readOnly = "{{readOnly}}" 
                            aria-describedby="{{Title}}Help" 
                            placeholder="Enter {{{replace Title '_' ' '}}}" 
                            data-defaultvalue="{{DefaultValue}}" 
                            value="{{DefaultValue}}" 
                            {{#if Required}}required{{/if}}
                        /> 
                    {{/case}}
                    {{#case "Attachments" "File"}}
                        <div class="file_inventory" data-filecontainer="{{@root.formType}}-{{@root.name}}-attachments">
                            <div class="box__inventory">
                            </div>
                        </div>
                        {{#switch @root.formType}}
                            {{#case "create" "edit"}}
                                <div class="box {{@root.name}}-attachments" id="{{@root.formType}}-{{@root.name}}-attachments">
                                    <div class="box__input">
                                        <svg class="box__icon" xmlns="http://www.w3.org/2000/svg" width="50" height="43" viewBox="0 0 50 43"><path d="M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"></path></svg>
                                        <input class="box__file" id="{{uiID}}" type="file" 
                                            name="{{@root.formType}}.{{@root.name}}.{{Title}}" 
                                            data-name="{{@root.name}}.{{Title}}"
                                            data-readOnly = "{{readOnly}}" 
                                            data-entity="{{EntityPropertyName}}" 
                                            id="{{@root.formType}}.{{@root.name}}.{{Title}}" 
                                            data-multiple-caption="{count} files selected"
                                            {{#ifCondition multiple ' == false'}} {{else}}multiple="multiple" {{/ifCondition}} 
                                            {{#if Required}}required{{/if}}
                                        />
                                        <label class="box__file_label" for="{{uiID}}"><strong>Choose a file</strong><span class="box__dragndrop"> or drag it here</span>.</label> 
                                        {{#ifCondition multiple ' == false'}}
                                            <label class="box__file_label" for="{{@root.formType}}.{{@root.name}}.{{Title}}"><strong>Single File Upload</strong><span class="box__dragndrop"> This Uploader only uploads one file at a time.</span>.</label> 
                                        {{else}}
                                            <label class="box__file_label" for="{{@root.formType}}.{{@root.name}}.{{Title}}"><strong>Multi File Upload</strong><span class="box__dragndrop"> This uploader can only uploads multiple files.</span>.</label> 
                                        {{/ifCondition}}
                                        <button class="box__button" type="submit">Upload</button>
                                    </div>
                                    <div class="box__uploading">Uploading&hellip;</div>
                                    <div class="box__success">Done!</div>
                                    <div class="box__error">Error! <span></span>.</div>
                                </div>
                            {{/case}}
                        {{/switch}}
                    {{/case}}
                    {{#case "Computed"}}
                    {{/case}}
                    {{#default}}{{TypeAsString}}{{/default}}
                {{/switch}}
                    
                <small id="{{@root.name}}.{{Title}}.Help" class="form-text text-muted"></small>
            </div>
        {{/if}}
        {{/if}}
    {{/d.results}}

    {{#if loadActionButtons}}
        {{#switch formType}}
            {{#case "edit"}}
                <button type="button" class="btn btn-primary save-data" data-owner="{{owner}}" data-source="{{name}}" data-sptype="{{spType}}" data-caller="form-{{formType}}-{{name}}" data-action="Update">Update Form</button> 
            {{/case}} 
            {{#case "view"}}
            {{/case}} 
            {{#default}}{{setVar "formType" "create"}}
                <button type="button" class="btn btn-primary save-data" data-owner="{{owner}}" data-source="{{name}}" data-sptype="{{spType}}" data-caller="form-{{formType}}-{{name}}" data-action="Save">Save Form</button>
                <button type="button" class="btn btn-success clear-data" data-owner="{{owner}}" data-source="{{name}}" data-sptype="{{spType}}" data-caller="form-{{formType}}-{{name}}" data-action="Reset">Reset Form</button> 
            {{/default}} 
        {{/switch}} 
    {{/if}}
</div>
